<mvc:View
    controllerName="starwarsfront.controller.Catalog"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
>
    <Page title="Catálogo Star Wars">
        <SplitApp id="splitApp">
            <!-- Panel izquierdo con Categorías -->
            <masterPages>
                <Page title="Categorías">
                    <subHeader>
                        <Toolbar>
                            <SearchField 
                                id="searchField" 
                                search=".onSearch" 
                                liveChange=".onSearch" 
                                width="100%" />
                        </Toolbar>
                    </subHeader>
                    <content>
                        <Button
                            text="Restablecer"
                            press=".ResetProducts"
                            class="sapUiSmallMargin"
                        />
                        <List
                            id="categoriesList"
                            items="{categories>/}"
                            mode="SingleSelectMaster"
                            selectionChange=".onCategorySelect"
                        >
                            <items>
                                <StandardListItem
                                    title="{categories>name}"
                                    type="Active"
                                />
                            </items>
                        </List>
                    </content>
                </Page>
            </masterPages>

            <!-- Panel derecho con productos -->
            <detailPages>
                <Page
                    id="productsPage"
                    title="Productos"
                    busyIndicatorDelay="0"
                >
                    <content>
                        <List
                            id="productsList"
                            items="{products>/}"
                        >
                            <items>
                                <ObjectListItem
                                    title="{products>name}"
                                    intro="{products>currency} {products>price}"
                                    icon="{products>image}"
                                    type="Active"
                                    press=".onProductPress"
                                >
                                    <attributes>
                                        <ObjectAttribute 
                                            title="Descripción" 
                                            text="{products>description}" />
                                    </attributes>
                                    <firstStatus>
                                        <ObjectStatus
                                            text="Stock: {products>stock}"
                                            state="{= ${products>stock} > 10 ? 'Success' : ${products>stock} > 0 ? 'Warning' : 'Error' }" />
                                    </firstStatus>
                                </ObjectListItem>
                            </items>
                        </List>
                    </content>
                </Page>
            </detailPages>
        </SplitApp>
    </Page>
</mvc:View>